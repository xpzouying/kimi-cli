# 键盘快捷键

Kimi Code CLI Shell 模式支持以下键盘快捷键。

## 快捷键列表

| 快捷键 | 功能 |
|--------|------|
| `Ctrl-X` | 切换 Agent/Shell 模式 |
| `Ctrl-O` | 在外部编辑器中编辑（`$VISUAL`/`$EDITOR`） |
| `Ctrl-J` | 插入换行 |
| `Alt-Enter` | 插入换行（同 `Ctrl-J`） |
| `Ctrl-V` | 粘贴（支持图片） |
| `Ctrl-E` | 展开审批请求完整内容 |
| `1`–`3` | 审批面板快速选择 |
| `1`–`5` | 问题面板按编号选择选项 |
| `Ctrl-D` | 退出 Kimi Code CLI |
| `Ctrl-C` | 中断当前操作 |

## 模式切换

### `Ctrl-X`：切换 Agent/Shell 模式

在输入框中按 `Ctrl-X` 可在两种模式间切换：

- **Agent 模式**：输入发送给 AI Agent 处理
- **Shell 模式**：输入作为本地 Shell 命令执行

提示符会根据当前模式变化：
- Agent 模式：`✨`（普通）或 `💫`（Thinking 模式）
- Shell 模式：`$`

## 外部编辑器

### `Ctrl-O`：在外部编辑器中编辑

按 `Ctrl-O` 会打开外部编辑器（如 VS Code、Vim）编辑当前输入内容。编辑器按以下优先级选择：

1. `/editor` 命令配置的编辑器
2. `$VISUAL` 环境变量
3. `$EDITOR` 环境变量
4. 自动检测：`code --wait`（VS Code）→ `vim` → `vi` → `nano`

使用 `/editor` 命令可交互式切换编辑器，也可直接指定，如 `/editor vim`。

在编辑器中保存退出后，编辑后的内容会替换当前输入框内容。如果不保存退出（如 Vim 中 `:q!`），输入框内容保持不变。

适用于编写多行 prompt、复杂代码片段等场景。

## 多行输入

### `Ctrl-J` / `Alt-Enter`：插入换行

默认情况下，按 `Enter` 会提交输入。如需输入多行内容，可使用：

- `Ctrl-J`：在任意位置插入换行
- `Alt-Enter`：在任意位置插入换行

适用于输入多行代码片段或格式化文本。

## 剪贴板操作

### `Ctrl-V`：粘贴

粘贴剪贴板内容到输入框。支持：

- **文本**：直接粘贴
- **图片**：转换为 base64 嵌入（需模型支持图片输入）

粘贴图片时会显示占位符 `[image:xxx.png,WxH]`，实际图片数据在发送时一并传递给模型。

::: tip 提示
图片粘贴需要模型支持 `image_in` 能力。
:::

## 审批请求操作

### `Ctrl-E`：展开完整内容

当审批请求的预览内容被截断时，按 `Ctrl-E` 可以在全屏分页器中查看完整内容。预览被截断时会显示 "... (truncated, ctrl-e to expand)" 提示。

适用于查看较长的 Shell 命令或文件 Diff 内容。

### 数字键快速选择

在审批面板中，按 `1`–`3` 可以直接选中并提交对应的审批选项，无需先用方向键选择再按 `Enter`。

## 结构化问答操作

当 AI 使用 `AskUserQuestion` 工具向你提问时，问题面板支持以下键盘操作：

| 快捷键 | 功能 |
|--------|------|
| `↑` / `↓` | 浏览选项 |
| `←` / `→` / `Tab` | 切换问题（多问题模式） |
| `1`–`5` | 按编号选择选项（单选时自动提交，多选时切换选中状态） |
| `Space` | 单选模式下提交选择，多选模式下切换选中状态 |
| `Enter` | 确认选择 |
| `Esc` | 跳过问题 |

当 AI 一次提出多个问题时，问题面板会以标签页形式展示，使用 `←` / `→` 或 `Tab` 可在问题间切换，已回答的问题会标记为已完成状态，切换回已回答的问题时会恢复之前的选择。

## 退出与中断

### `Ctrl-D`：退出

在输入框为空时按 `Ctrl-D` 退出 Kimi Code CLI。

### `Ctrl-C`：中断

- 在输入框中：清空当前输入
- Agent 运行时：中断当前操作
- 斜杠命令执行时：中断命令

## 补全操作

在 Agent 模式下，输入时会自动显示补全菜单：

| 触发 | 补全内容 |
|------|---------|
| `/` | 斜杠命令 |
| `@` | 工作目录文件路径 |

补全操作：
- 方向键选择
- `Enter` 确认选择
- `Esc` 关闭菜单
- 继续输入过滤选项

## 状态栏

底部状态栏显示：

- 当前时间
- 当前模式（agent/shell）和模型名称（Agent 模式下显示）
- YOLO 标识（开启时显示）
- 快捷键提示
- 上下文使用率

状态栏会自动刷新更新信息。
